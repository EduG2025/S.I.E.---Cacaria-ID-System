# Correção de Erro 502 Bad Gateway e Deploy Final

Siga estes passos estritamente no terminal do seu VPS para colocar o sistema online.

## 1. Parar processos antigos e limpar
```bash
pm2 delete all
rm -rf node_modules package-lock.json
```

## 2. Instalação Limpa
```bash
npm install
```

## 3. Build do Frontend
```bash
npm run build
```
*Aguarde até ver a mensagem "dist/index.html ... built in..."*

## 4. Iniciar o Servidor com PM2 (Modo Produção)
Agora usamos o arquivo de configuração que garante as variáveis corretas.
```bash
pm2 start ecosystem.config.cjs
```

## 5. Salvar configuração de inicialização
```bash
pm2 save
```

## 6. Verificação
Verifique se o servidor está online e sem erros:
```bash
pm2 status
pm2 logs sie-backend
```
*Você deve ver "Server running on port 3001" e "Conectado ao MySQL com sucesso".*

## 7. Configuração Final do Nginx (Se ainda der erro)
Se o PM2 estiver rodando (status 'online'), mas o site der erro, reinicie o Nginx:
```bash
sudo systemctl restart nginx
```
